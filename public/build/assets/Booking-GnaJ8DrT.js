import{_ as x}from"./AppLayout-RfRyHH1_.js";import{m as u,h as l,o as p,c as L,w as a,b as s,f as r,d as c,e as m,s as N,v as S,p as T,j as F,a as H}from"./app-9BzRjj2Q.js";import O from"./BookVacant-xYPFJGbU.js";import{_ as j}from"./_plugin-vue_export-helper-x3n3nnut.js";const E={components:{AppLayout:x,bookvacant:O},data(){return{bookingHeaders:[{title:"Booking ID",value:"id"},{title:"Vacant Id",value:"vacant_id"},{title:"Properpty Name",value:"property.property_name"},{title:"Date",value:"date"},{title:"Status",value:"status"}],bookings:[],tab:"viewPosts",valid:!0,ad:{title:"",address:"",description:"",number_of_unitsRules:"",propertyType:null,images:[]},titleRules:[e=>!!e||"Title is required",e=>e&&e.length<=255||"Title must be less than 255 characters"],addressRules:[e=>!!e||"Address is required"],descriptionRules:[e=>!!e||"Description is required"],number_of_unitsRules:[e=>!!e||"number of units    is required"],rentRules:[e=>!!e||"rent   is required"],propertyTypes:["Apartment","House","Studio","Condo","Townhouse","Other"],properties:[],property_name:"",property_id:"",rent:"",vacants:[],headers:[{title:"Vacant ID",key:"id"},{title:"Property Name",key:"property.property_name"},{title:"Description",key:"description"},{title:"Rent",key:"rent"},{title:"Units",key:"number_of_units"},{title:"Actions",key:"actions",sortable:!1}]}},created(){this.fetchProperties(),this.viewPosts(),this.fetchBookings()},computed:{tenant_id(){return this.$page.props.auth.user?this.$page.props.auth.user.id:null}},methods:{submitAd(){if(this.$refs.form.validate()){let e=new FormData;e.append("property_id",this.property_id),e.append("description",this.ad.description),e.append("number_of_units",this.ad.number_of_units),e.append("rent",this.ad.rent),this.ad.images&&this.ad.images.length>0&&this.ad.images.forEach((t,_)=>{e.append(`images[${_}]`,t)}),u.post("/vacantAd",e,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{console.log("Ad submitted successfully",t.data)}).catch(t=>{console.error("Failed to submit ad",t.response.data)})}else console.log("Form is invalid")},OpenBookVacant(e){this.$refs.bookVacant.show(e)},fetchProperties(){u.get("property").then(t=>{console.log("properties response:",t.data),this.properties=t.data}).catch(t=>{console.error("failed to load properties:",t)})},viewPosts(){u.get("vacant").then(t=>{console.log("vacants response:",t.data),this.vacants=t.data}).catch(t=>{console.error("failed to load vacants:",t)})},fetchBookings(){u.get("/bookings").then(e=>{this.bookings=e.data}).catch(e=>{console.error("Failed to load bookings:",e)})}}},Q=e=>(T("data-v-c1922fa7"),e=e(),F(),e),z={key:0},G={key:0},J=Q(()=>H("span",null,"Book Vacant",-1)),K={key:0};function M(e,t,_,W,o,v){const i=l("v-text-field"),y=l("v-container"),k=l("VCard"),g=l("v-toolbar-title"),V=l("v-toolbar"),f=l("v-tab"),P=l("v-tabs"),d=l("v-card"),B=l("v-select"),A=l("v-file-input"),b=l("v-btn"),w=l("v-form"),R=l("v-icon"),U=l("v-tooltip"),h=l("v-data-table"),C=l("bookvacant"),I=l("AppLayout");return p(),L(I,null,{default:a(()=>[s(k,{class:"my-card"},{default:a(()=>[s(y,null,{default:a(()=>[s(i,{modelValue:e.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=n=>e.searchQuery=n),label:"Search",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),s(V,{flat:""},{default:a(()=>[s(g,{class:"text-center",style:{width:"100%"}},{default:a(()=>[r("Book")]),_:1})]),_:1}),s(d,null,{default:a(()=>[s(P,{modelValue:o.tab,"onUpdate:modelValue":t[1]||(t[1]=n=>o.tab=n),"background-color":"transparent"},{default:a(()=>[s(f,{value:"viewPosts"},{default:a(()=>[r("View Posts")]),_:1}),s(f,{value:"fetchBookings"},{default:a(()=>[r("Bookings")]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(d,{class:"my-card"},{default:a(()=>[o.tab==="postVacant"?(p(),c("div",z,[s(w,{ref:"form",modelValue:o.valid,"onUpdate:modelValue":t[7]||(t[7]=n=>o.valid=n),"lazy-validation":""},{default:a(()=>[s(B,{modelValue:o.property_id,"onUpdate:modelValue":t[2]||(t[2]=n=>o.property_id=n),items:o.properties,"item-title":"property_name",label:"Property","item-value":"id"},null,8,["modelValue","items"]),s(i,{modelValue:o.ad.description,"onUpdate:modelValue":t[3]||(t[3]=n=>o.ad.description=n),label:"Description",required:"",rules:o.descriptionRules},null,8,["modelValue","rules"]),s(i,{modelValue:o.ad.number_of_units,"onUpdate:modelValue":t[4]||(t[4]=n=>o.ad.number_of_units=n),label:"Number of units",required:"",rules:o.number_of_unitsRules},null,8,["modelValue","rules"]),s(i,{modelValue:o.ad.rent,"onUpdate:modelValue":t[5]||(t[5]=n=>o.ad.rent=n),label:"rent",required:"",rules:o.rent},null,8,["modelValue","rules"]),s(A,{modelValue:o.ad.images,"onUpdate:modelValue":t[6]||(t[6]=n=>o.ad.images=n),label:"Property images",multiple:"",accept:"image/png, image/jpeg, image/bmp"},null,8,["modelValue"]),s(b,{disabled:!o.valid,onClick:v.submitAd},{default:a(()=>[r("Submit")]),_:1},8,["disabled","onClick"])]),_:1},8,["modelValue"])])):m("",!0)]),_:1}),s(d,{class:"my-card"},{default:a(()=>[o.tab==="viewPosts"?(p(),c("div",G,[s(h,{headers:o.headers,items:o.vacants,class:"elevation-1"},{"item.actions":a(({item:n})=>[s(U,{bottom:""},{activator:a(({on:q,attrs:D})=>[s(b,N({small:"",color:"info",icon:""},S(q),D,{onClick:X=>v.OpenBookVacant(n)}),{default:a(()=>[s(R,null,{default:a(()=>[r("mdi-calendar-check")]),_:1})]),_:2},1040,["onClick"])]),default:a(()=>[J]),_:2},1024)]),_:1},8,["headers","items"])])):m("",!0)]),_:1}),s(d,{class:"my-card"},{default:a(()=>[o.tab==="fetchBookings"?(p(),c("div",K,[s(h,{headers:o.bookingHeaders,items:o.bookings,class:"elevation-1"},null,8,["headers","items"])])):m("",!0),s(C,{ref:"bookVacant"},null,512)]),_:1})]),_:1})}const te=j(E,[["render",M],["__scopeId","data-v-c1922fa7"]]);export{te as default};
