import{_ as L}from"./AppLayout-DLV5K9WW.js";import{h as a,c as N,o as x,w as o,b as t,i as S,f as i,a as O,t as R,m as z,j as u}from"./app-Cdoi5j0A.js";import j from"./PropertyUnit-DVR2eyn9.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={components:{AppLayout:L,PropertyUnit:j},data:()=>({dialog:!1,loading:!1,dialogDelete:!1,headers:[{title:"Property Name",align:"start",sortable:!1,key:"property_name"},{title:"Address",key:"address"},{title:"Email",key:"email"},{title:"Phone Number",key:"phone"},{title:"Description",key:"description"},{title:"Landlord",key:"landlord.landlord_name"},{title:"Units",key:"number_of_units"},{title:"Actions",key:"actions",sortable:!1}],properties:[],landlords:[],editedIndex:-1,searchQuery:"",editedItem:{property_name:"",email:"",phone:"",description:"",number_of_units:"",address:""},defaultItem:{property_name:"",email:"",phone:"",landlord_id:"",number_of_units:"",description:""}}),computed:{formTitle(){return this.editedIndex===-1?"New Property":"Edit Property"}},watch:{dialog(l){l||this.close()},dialogDelete(l){l||this.closeDelete()}},created(){this.initialize(),this.fetchlandlord()},methods:{viewUnits(l){this.$refs.PropertyUnit.show(l)},initialize(){u.get("/properties").then(e=>{console.log("API Response:",e.data),this.properties=e.data}).catch(e=>{console.error("API Error:",e)})},editItem(l){this.editedIndex=this.properties.indexOf(l),this.editedItem=Object.assign({},l),this.dialog=!0},deleteItem(l){this.editedIndex=this.properties.indexOf(l),this.editedItem=Object.assign({},l),this.dialogDelete=!0},deleteItemConfirm(){u.delete(`/property/${this.editedItem.id}`).then(()=>{this.properties.splice(this.editedIndex,1),this.closeDelete()}).catch(l=>console.error("Deletion error:",l))},close(){this.dialog=!1,this.resetForm()},closeDelete(){this.dialogDelete=!1,this.resetForm()},resetForm(){this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},save(){let l;this.editedIndex>-1?l=u.put(`/property/${this.editedItem.id}`,this.editedItem):l=u.post("/property",this.editedItem),l.then(e=>{this.editedIndex>-1?Object.assign(this.properties[this.editedIndex],e.data.data):this.properties.push(e.data.data),this.close()}).catch(e=>console.error("Saving error:",e))},performSearch(){this.loading=!0;const l="/property/search?query="+this.searchQuery;u.get(l).then(e=>{console.log("Search response:",e.data),this.properties=e.data,this.loading=!1}).catch(e=>{console.error("Search error:",e),this.loading=!1})},fetchlandlord(){u.get("/landlords").then(e=>{console.log("Landlords response:",e.data),this.landlords=e.data}).catch(e=>{console.error("failed to load landlords:",e)})}}},Q={class:"text-h5"};function B(l,e,F,T,q,n){const r=a("v-text-field"),c=a("v-container"),_=a("VCard"),g=a("v-toolbar-title"),V=a("v-divider"),p=a("v-spacer"),m=a("v-btn"),v=a("v-card-title"),s=a("v-col"),k=a("v-select"),C=a("v-row"),U=a("v-card-text"),y=a("v-card-actions"),h=a("v-card"),I=a("v-dialog"),P=a("v-toolbar"),f=a("v-icon"),w=a("v-data-table"),A=a("PropertyUnit"),D=a("AppLayout");return x(),N(D,null,{default:o(()=>[t(_,{class:"my-card"},{default:o(()=>[t(c,null,{default:o(()=>[t(r,{modelValue:l.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=d=>l.searchQuery=d),label:"Search",onKeyup:S(n.performSearch,["enter"]),variant:"outlined"},null,8,["modelValue","onKeyup"])]),_:1})]),_:1}),t(_,{class:"my-card",outlined:""},{default:o(()=>[t(w,{headers:l.headers,loading:l.loading,items:l.properties,"sort-by":[{key:"property_name",order:"asc"}]},{top:o(()=>[t(P,{flat:""},{default:o(()=>[t(g,null,{default:o(()=>e[10]||(e[10]=[i("Property")])),_:1}),t(V,{class:"mx-4",inset:"",vertical:""}),t(p),t(I,{modelValue:l.dialog,"onUpdate:modelValue":e[8]||(e[8]=d=>l.dialog=d),"max-width":"500px"},{activator:o(({props:d})=>[t(m,z({color:"primary",dark:"",class:"mb-2"},d),{default:o(()=>e[11]||(e[11]=[i(" New Property ")])),_:2},1040)]),default:o(()=>[t(h,null,{default:o(()=>[t(v,null,{default:o(()=>[O("span",Q,R(n.formTitle),1)]),_:1}),t(U,null,{default:o(()=>[t(c,null,{default:o(()=>[t(C,null,{default:o(()=>[t(s,{cols:"12",sm:"6"},{default:o(()=>[t(r,{modelValue:l.editedItem.property_name,"onUpdate:modelValue":e[1]||(e[1]=d=>l.editedItem.property_name=d),label:"Property Name"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12",sm:"6"},{default:o(()=>[t(r,{modelValue:l.editedItem.email,"onUpdate:modelValue":e[2]||(e[2]=d=>l.editedItem.email=d),label:"Email"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12",sm:"6"},{default:o(()=>[t(r,{modelValue:l.editedItem.phone,"onUpdate:modelValue":e[3]||(e[3]=d=>l.editedItem.phone=d),label:"phone"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12",sm:"6"},{default:o(()=>[t(r,{modelValue:l.editedItem.address,"onUpdate:modelValue":e[4]||(e[4]=d=>l.editedItem.address=d),label:"Address"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12",sm:"6"},{default:o(()=>[t(r,{modelValue:l.editedItem.description,"onUpdate:modelValue":e[5]||(e[5]=d=>l.editedItem.description=d),label:"Description"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12",sm:"6"},{default:o(()=>[t(r,{modelValue:l.editedItem.number_of_units,"onUpdate:modelValue":e[6]||(e[6]=d=>l.editedItem.number_of_units=d),label:"Units"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12",sm:"6"},{default:o(()=>[t(k,{modelValue:l.editedItem.landlord_id,"onUpdate:modelValue":e[7]||(e[7]=d=>l.editedItem.landlord_id=d),items:l.landlords,"item-title":"landlord_name",label:"Landlord Name","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),t(y,null,{default:o(()=>[t(p),t(m,{color:"blue-darken-1",variant:"text",onClick:n.close},{default:o(()=>e[12]||(e[12]=[i(" Cancel ")])),_:1},8,["onClick"]),t(m,{color:"blue-darken-1",variant:"text",onClick:n.save},{default:o(()=>e[13]||(e[13]=[i(" Save ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:l.dialogDelete,"onUpdate:modelValue":e[9]||(e[9]=d=>l.dialogDelete=d),"max-width":"500px"},{default:o(()=>[t(h,null,{default:o(()=>[t(v,{class:"text-h5"},{default:o(()=>e[14]||(e[14]=[i("Are you sure you want to delete this item?")])),_:1}),t(y,null,{default:o(()=>[t(p),t(m,{color:"blue-darken-1",variant:"text",onClick:n.closeDelete},{default:o(()=>e[15]||(e[15]=[i("Cancel")])),_:1},8,["onClick"]),t(m,{color:"blue-darken-1",variant:"text",onClick:n.deleteItemConfirm},{default:o(()=>e[16]||(e[16]=[i("OK")])),_:1},8,["onClick"]),t(p)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":o(({item:d})=>[t(f,{size:"small",class:"me-2",onClick:b=>n.editItem(d)},{default:o(()=>e[17]||(e[17]=[i(" mdi-pencil ")])),_:2},1032,["onClick"]),t(f,{size:"small",class:"me-2",onClick:b=>n.viewUnits(d)},{default:o(()=>e[18]||(e[18]=[i(" mdi-home-outline ")])),_:2},1032,["onClick"]),t(f,{size:"small",onClick:b=>n.deleteItem(d)},{default:o(()=>e[19]||(e[19]=[i(" mdi-delete ")])),_:2},1032,["onClick"])]),"no-data":o(()=>[t(m,{color:"primary",onClick:n.initialize},{default:o(()=>e[20]||(e[20]=[i(" Reset ")])),_:1},8,["onClick"])]),_:1},8,["headers","loading","items"]),t(A,{ref:"PropertyUnit"},null,512)]),_:1})]),_:1})}const M=E(K,[["render",B],["__scopeId","data-v-754fcb3f"]]);export{M as default};
