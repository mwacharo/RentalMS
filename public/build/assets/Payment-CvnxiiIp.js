import{_ as L}from"./AppLayout-DLV5K9WW.js";import{h as a,c as w,o as x,w as o,b as l,i as N,f as i,a as S,t as O,j as m}from"./app-Cdoi5j0A.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={components:{AppLayout:L},data:()=>({dialog:!1,loading:!1,dialogDelete:!1,headers:[{title:"Property Name",align:"start",sortable:!1,key:"property_name"},{title:"Address",key:"address"},{title:"Email",key:"email"},{title:"Phone Number",key:"phone"},{title:"Description",key:"description"},{title:"Landlord",key:"landlord.landlord_name"},{title:"Units",key:"number_of_units"},{title:"Actions",key:"actions",sortable:!1}],properties:[],landlords:[],editedIndex:-1,searchQuery:"",editedItem:{property_name:"",email:"",phone:"",description:"",number_of_units:"",address:""},defaultItem:{property_name:"",email:"",phone:"",landlord_id:"",number_of_units:"",description:""}}),computed:{formTitle(){return this.editedIndex===-1?"New Property":"Edit Property"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},created(){this.initialize(),this.fetchlandlord()},methods:{initialize(){m.get("v1/property").then(e=>{console.log("API Response:",e.data),this.properties=e.data}).catch(e=>{console.error("API Error:",e)})},editItem(t){this.editedIndex=this.properties.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.properties.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){m.delete(`/property/${this.editedItem.id}`).then(()=>{this.properties.splice(this.editedIndex,1),this.closeDelete()}).catch(t=>console.error("Deletion error:",t))},close(){this.dialog=!1,this.resetForm()},closeDelete(){this.dialogDelete=!1,this.resetForm()},resetForm(){this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},save(){let t;this.editedIndex>-1?t=m.put(`/property/${this.editedItem.id}`,this.editedItem):t=m.post("/property",this.editedItem),t.then(e=>{this.editedIndex>-1?Object.assign(this.properties[this.editedIndex],e.data.data):this.properties.push(e.data.data),this.close()}).catch(e=>console.error("Saving error:",e))},performSearch(){this.loading=!0;const t="/property/search?query="+this.searchQuery;m.get(t).then(e=>{console.log("Search response:",e.data),this.properties=e.data,this.loading=!1}).catch(e=>{console.error("Search error:",e),this.loading=!1})},fetchlandlord(){m.get("/landlords").then(e=>{console.log("Landlords response:",e.data),this.landlords=e.data}).catch(e=>{console.error("failed to load landlords:",e)})}}},z={class:"text-h5"};function E(t,e,K,Q,T,n){const s=a("v-text-field"),c=a("v-container"),f=a("VCard"),V=a("v-toolbar-title"),b=a("v-divider"),p=a("v-spacer"),_=a("v-card-title"),r=a("v-col"),g=a("v-select"),k=a("v-row"),C=a("v-card-text"),u=a("v-btn"),v=a("v-card-actions"),h=a("v-card"),I=a("v-dialog"),U=a("v-toolbar"),y=a("v-icon"),A=a("v-data-table"),D=a("AppLayout");return x(),w(D,null,{default:o(()=>[l(f,{class:"my-card"},{default:o(()=>[l(c,null,{default:o(()=>[l(s,{modelValue:t.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=d=>t.searchQuery=d),label:"Search",onKeyup:N(n.performSearch,["enter"]),variant:"outlined"},null,8,["modelValue","onKeyup"])]),_:1})]),_:1}),l(f,{class:"my-card",outlined:""},{default:o(()=>[l(A,{headers:t.headers,loading:t.loading,items:t.properties,"sort-by":[{key:"property_name",order:"asc"}]},{top:o(()=>[l(U,{flat:""},{default:o(()=>[l(V,null,{default:o(()=>e[10]||(e[10]=[i("Transactions")])),_:1}),l(b,{class:"mx-4",inset:"",vertical:""}),l(p),l(I,{modelValue:t.dialog,"onUpdate:modelValue":e[8]||(e[8]=d=>t.dialog=d),"max-width":"500px"},{default:o(()=>[l(h,null,{default:o(()=>[l(_,null,{default:o(()=>[S("span",z,O(n.formTitle),1)]),_:1}),l(C,null,{default:o(()=>[l(c,null,{default:o(()=>[l(k,null,{default:o(()=>[l(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[l(s,{modelValue:t.editedItem.property_name,"onUpdate:modelValue":e[1]||(e[1]=d=>t.editedItem.property_name=d),label:"Property Name"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[l(s,{modelValue:t.editedItem.email,"onUpdate:modelValue":e[2]||(e[2]=d=>t.editedItem.email=d),label:"Email"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[l(s,{modelValue:t.editedItem.phone,"onUpdate:modelValue":e[3]||(e[3]=d=>t.editedItem.phone=d),label:"phone"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[l(s,{modelValue:t.editedItem.address,"onUpdate:modelValue":e[4]||(e[4]=d=>t.editedItem.address=d),label:"Address"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[l(s,{modelValue:t.editedItem.description,"onUpdate:modelValue":e[5]||(e[5]=d=>t.editedItem.description=d),label:"Description"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[l(s,{modelValue:t.editedItem.number_of_units,"onUpdate:modelValue":e[6]||(e[6]=d=>t.editedItem.number_of_units=d),label:"Units"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[l(g,{modelValue:t.editedItem.landlord_id,"onUpdate:modelValue":e[7]||(e[7]=d=>t.editedItem.landlord_id=d),items:t.landlords,"item-title":"landlord_name",label:"Landlord Name","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),l(v,null,{default:o(()=>[l(p),l(u,{color:"blue-darken-1",variant:"text",onClick:n.close},{default:o(()=>e[11]||(e[11]=[i(" Cancel ")])),_:1},8,["onClick"]),l(u,{color:"blue-darken-1",variant:"text",onClick:n.save},{default:o(()=>e[12]||(e[12]=[i(" Save ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(I,{modelValue:t.dialogDelete,"onUpdate:modelValue":e[9]||(e[9]=d=>t.dialogDelete=d),"max-width":"500px"},{default:o(()=>[l(h,null,{default:o(()=>[l(_,{class:"text-h5"},{default:o(()=>e[13]||(e[13]=[i("Are you sure you want to delete this item?")])),_:1}),l(v,null,{default:o(()=>[l(p),l(u,{color:"blue-darken-1",variant:"text",onClick:n.closeDelete},{default:o(()=>e[14]||(e[14]=[i("Cancel")])),_:1},8,["onClick"]),l(u,{color:"blue-darken-1",variant:"text",onClick:n.deleteItemConfirm},{default:o(()=>e[15]||(e[15]=[i("OK")])),_:1},8,["onClick"]),l(p)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":o(({item:d})=>[l(y,{size:"small",class:"me-2",onClick:P=>n.editItem(d)},{default:o(()=>e[16]||(e[16]=[i(" mdi-pencil ")])),_:2},1032,["onClick"]),l(y,{size:"small",onClick:P=>n.deleteItem(d)},{default:o(()=>e[17]||(e[17]=[i(" mdi-delete ")])),_:2},1032,["onClick"])]),"no-data":o(()=>[l(u,{color:"primary",onClick:n.initialize},{default:o(()=>e[18]||(e[18]=[i(" Reset ")])),_:1},8,["onClick"])]),_:1},8,["headers","loading","items"])]),_:1})]),_:1})}const G=R(j,[["render",E],["__scopeId","data-v-d388a46f"]]);export{G as default};
