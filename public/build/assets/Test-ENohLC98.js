import{_ as L}from"./AppLayout-yXTTRQlu.js";import{s as r,h as a,o as N,c as O,w as l,b as e,x as S,f as i,a as z,t as U}from"./app-0ZjGijb6.js";import{_ as j}from"./_plugin-vue_export-helper-x3n3nnut.js";const A={components:{AppLayout:L},data:()=>({dialog:!1,dialogDelete:!1,headers:[{text:"Landlord Name",value:"landlord_name"},{text:"Email",value:"email"},{text:"Phone",value:"phone"},{text:"Actions",value:"actions",sortable:!1}],landlords:[],editedIndex:-1,editedItem:{id:null,landlord_name:"",email:"",phone:""},defaultItem:{id:null,landlord_name:"",email:"",phone:""},searchQuery:""}),computed:{formTitle(){return this.editedIndex===-1?"New Landlord":"Edit Landlord"}},methods:{initialize(){r.get("/api/landlords").then(t=>{this.landlords=t.data}).catch(t=>console.error("Initialization error:",t))},openNewLandlordDialog(){this.editedIndex=-1,this.editedItem=Object.assign({},this.defaultItem),this.dialog=!0},editItem(t){this.editedIndex=this.landlords.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.landlords.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){r.delete(`/api/landlord/${this.editedItem.id}`).then(()=>{this.landlords.splice(this.editedIndex,1),this.closeDelete()}).catch(t=>console.error("Deletion error:",t))},close(){this.dialog=!1,this.resetForm()},closeDelete(){this.dialogDelete=!1,this.resetForm()},resetForm(){this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},save(){let t;this.editedIndex>-1?t=r.put(`/api/landlord/${this.editedItem.id}`,this.editedItem):t=r.post("/api/landlord",this.editedItem),t.then(d=>{this.editedIndex>-1?Object.assign(this.landlords[this.editedIndex],d.data.data):this.landlords.push(d.data.data),this.close()}).catch(d=>console.error("Saving error:",d))},performSearch(){r.get(`/api/landlords/search?query=${this.searchQuery}`).then(t=>{this.landlords=t.data}).catch(t=>console.error("Search error:",t))}},created(){this.initialize()}},K={class:"text-h5"};function Q(t,d,T,B,E,n){const c=a("v-text-field"),u=a("v-container"),_=a("VCard"),b=a("v-toolbar-title"),g=a("v-divider"),m=a("v-spacer"),s=a("v-btn"),k=a("v-toolbar"),h=a("v-icon"),x=a("v-data-table"),p=a("v-card-title"),C=a("v-col"),V=a("v-row"),y=a("v-card-text"),f=a("v-card-actions"),v=a("v-card"),I=a("v-dialog"),w=a("AppLayout");return N(),O(w,null,{default:l(()=>[e(_,{class:"my-card"},{default:l(()=>[e(u,null,{default:l(()=>[e(c,{modelValue:t.searchQuery,"onUpdate:modelValue":d[0]||(d[0]=o=>t.searchQuery=o),label:"Search",onKeyup:S(n.performSearch,["enter"]),variant:"outlined"},null,8,["modelValue","onKeyup"])]),_:1})]),_:1}),e(_,{class:"my-card",outlined:""},{default:l(()=>[e(x,{headers:t.headers,items:t.landlords,"sort-by":[{key:"landlord_name",order:"asc"}]},{top:l(()=>[e(k,{flat:""},{default:l(()=>[e(b,null,{default:l(()=>[i("Landlords")]),_:1}),e(g,{class:"mx-4",inset:"",vertical:""}),e(m),e(s,{color:"primary",dark:"",class:"mb-2",onClick:n.openNewLandlordDialog},{default:l(()=>[i(" New Landlord ")]),_:1},8,["onClick"])]),_:1})]),"item.actions":l(({item:o})=>[e(h,{size:"small",class:"me-2",onClick:D=>n.editItem(o)},{default:l(()=>[i(" mdi-pencil ")]),_:2},1032,["onClick"]),e(h,{size:"small",onClick:D=>n.deleteItem(o)},{default:l(()=>[i(" mdi-delete ")]),_:2},1032,["onClick"])]),"no-data":l(()=>[e(s,{color:"primary",onClick:n.initialize},{default:l(()=>[i("Reset")]),_:1},8,["onClick"])]),_:1},8,["headers","items"])]),_:1}),e(I,{modelValue:t.dialog,"onUpdate:modelValue":d[4]||(d[4]=o=>t.dialog=o),"max-width":"500px"},{default:l(()=>[e(v,null,{default:l(()=>[e(p,null,{default:l(()=>[z("span",K,U(n.formTitle),1)]),_:1}),e(y,null,{default:l(()=>[e(u,null,{default:l(()=>[e(V,null,{default:l(()=>[e(C,{cols:"12"},{default:l(()=>[e(c,{modelValue:t.editedItem.landlord_name,"onUpdate:modelValue":d[1]||(d[1]=o=>t.editedItem.landlord_name=o),label:"Landlord Name"},null,8,["modelValue"]),e(c,{modelValue:t.editedItem.email,"onUpdate:modelValue":d[2]||(d[2]=o=>t.editedItem.email=o),label:"Email"},null,8,["modelValue"]),e(c,{modelValue:t.editedItem.phone,"onUpdate:modelValue":d[3]||(d[3]=o=>t.editedItem.phone=o),label:"Phone"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(m),e(s,{color:"blue-darken-1",text:"",onClick:n.close},{default:l(()=>[i("Cancel")]),_:1},8,["onClick"]),e(s,{color:"blue-darken-1",text:"",onClick:n.save},{default:l(()=>[i("Save")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(I,{modelValue:t.dialogDelete,"onUpdate:modelValue":d[5]||(d[5]=o=>t.dialogDelete=o),"max-width":"500px"},{default:l(()=>[e(v,null,{default:l(()=>[e(p,{class:"text-h5"},{default:l(()=>[i("Are you sure you want to delete this item?")]),_:1}),e(f,null,{default:l(()=>[e(m),e(s,{color:"blue-darken-1",text:"",onClick:n.closeDelete},{default:l(()=>[i("Cancel")]),_:1},8,["onClick"]),e(s,{color:"blue-darken-1",text:"",onClick:n.deleteItemConfirm},{default:l(()=>[i("OK")]),_:1},8,["onClick"]),e(m)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const R=j(A,[["render",Q],["__scopeId","data-v-b50bb374"]]);export{R as default};
