import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as u,c as S,o as P,w as l,b as t,a as s,f,t as _}from"./app-Cdoi5j0A.js";const T={props:{bills:{type:Array,required:!0}},data(){return{dialog:!1,valid:!0,tableHeaders:[{title:"Item",value:"item"},{title:"Unit Cost",value:"unit_cost"},{title:"Number of Units",value:"number_of_units"},{title:"Amount",value:"amount"}],paymentStatuses:["Paid","Pending","Overdue"],tenantInfo:{tenant_name:"",unit_number:"",phone:""},invoice:{number:"000001",date:new Date().toISOString().substr(0,10),dueDate:"",items:[],notes:"",payment_status:"Pending"}}},computed:{total(){return this.invoice.items.reduce((a,e)=>a+parseFloat(e.amount),0)}},watch:{bills:{immediate:!0,handler(a){if(a&&a.length){const e=a[0].tenant.unit.rent,p=a[0].tenant.unit.deposit;this.tenantInfo={tenant_name:a[0].tenant.tenant_name,unit_number:a[0].tenant.unit.unit_number,phone:a[0].tenant.phone};const b={item:"Rent",unit_cost:e,number_of_units:1,amount:e},o={item:"Deposit",unit_cost:p,number_of_units:1,amount:p},i=a.map(m=>({item:m.bill.bill,unit_cost:m.bill.unit_cost,number_of_units:m.bill.number_of_units,amount:m.amount}));this.invoice.items=[b,o,...i]}}}},methods:{show(a){console.log(a),this.dialog=!0,this.id=a.id},formatCurrency(a){return`$${parseFloat(a).toFixed(2)}`},close(){this.dialog=!1}}},h={class:"mt-4"};function q(a,e,p,b,o,i){const m=u("v-spacer"),V=u("v-icon"),v=u("v-btn"),x=u("v-card-title"),d=u("v-text-field"),r=u("v-col"),c=u("v-row"),g=u("v-data-table"),y=u("v-textarea"),I=u("v-select"),C=u("v-form"),U=u("v-card-text"),D=u("v-card"),k=u("v-dialog");return P(),S(k,{modelValue:o.dialog,"onUpdate:modelValue":e[9]||(e[9]=n=>o.dialog=n),"max-width":"800px"},{default:l(()=>[t(D,null,{default:l(()=>[t(x,{class:"blue white--text"},{default:l(()=>[e[11]||(e[11]=s("span",{class:"text-h6"},"Invoice Details",-1)),t(m),t(v,{icon:"",onClick:i.close},{default:l(()=>[t(V,null,{default:l(()=>e[10]||(e[10]=[f("mdi-close")])),_:1})]),_:1},8,["onClick"])]),_:1}),t(U,null,{default:l(()=>[t(C,{ref:"form",modelValue:o.valid,"onUpdate:modelValue":e[8]||(e[8]=n=>o.valid=n)},{default:l(()=>[t(c,{class:"pa-4"},{default:l(()=>[t(r,{cols:"6"},{default:l(()=>[e[12]||(e[12]=s("h5",{class:"font-weight-bold"},"Bill To:",-1)),t(d,{modelValue:o.tenantInfo.tenant_name,"onUpdate:modelValue":e[0]||(e[0]=n=>o.tenantInfo.tenant_name=n),label:"Tenant Name",outlined:"",required:""},null,8,["modelValue"]),t(d,{modelValue:o.tenantInfo.unit_number,"onUpdate:modelValue":e[1]||(e[1]=n=>o.tenantInfo.unit_number=n),label:"Unit Number",outlined:""},null,8,["modelValue"]),t(d,{modelValue:o.tenantInfo.phone,"onUpdate:modelValue":e[2]||(e[2]=n=>o.tenantInfo.phone=n),label:"Phone",outlined:""},null,8,["modelValue"])]),_:1}),t(r,{cols:"6",class:"text-right"},{default:l(()=>[t(d,{modelValue:o.invoice.number,"onUpdate:modelValue":e[3]||(e[3]=n=>o.invoice.number=n),label:"Invoice #",outlined:"",readonly:""},null,8,["modelValue"]),t(d,{modelValue:o.invoice.date,"onUpdate:modelValue":e[4]||(e[4]=n=>o.invoice.date=n),label:"Date",outlined:"",type:"date"},null,8,["modelValue"]),t(d,{modelValue:o.invoice.dueDate,"onUpdate:modelValue":e[5]||(e[5]=n=>o.invoice.dueDate=n),label:"Invoice Due Date",outlined:"",type:"date"},null,8,["modelValue"])]),_:1})]),_:1}),t(c,{class:"pa-4"},{default:l(()=>[t(r,null,{default:l(()=>[t(g,{headers:o.tableHeaders,items:o.invoice.items,class:"elevation-1","hide-default-footer":"","disable-pagination":""},{"item.item":l(({item:n})=>[s("span",null,_(n.item),1)]),"item.description":l(({item:n})=>[s("span",null,_(n.unit_cost),1)]),"item.quantity":l(({item:n})=>[s("span",null,_(n.number_of_units),1)]),"item.amount":l(({item:n})=>[s("span",null,_(i.formatCurrency(n.amount)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1}),t(c,{class:"pa-4"},{default:l(()=>[t(r,{cols:"6"},{default:l(()=>[t(y,{modelValue:o.invoice.notes,"onUpdate:modelValue":e[6]||(e[6]=n=>o.invoice.notes=n),label:"Notes",outlined:""},null,8,["modelValue"])]),_:1}),t(r,{cols:"6",class:"text-right"},{default:l(()=>[t(I,{modelValue:o.invoice.payment_status,"onUpdate:modelValue":e[7]||(e[7]=n=>o.invoice.payment_status=n),items:o.paymentStatuses,label:"Payment Status",outlined:""},null,8,["modelValue","items"]),s("h4",h,"Total: "+_(i.formatCurrency(i.total)),1)]),_:1})]),_:1}),t(c,null,{default:l(()=>[t(r,{class:"text-right"},{default:l(()=>[t(v,{color:"primary",onClick:a.submitInvoice,disabled:!o.valid},{default:l(()=>e[13]||(e[13]=[f("Submit")])),_:1},8,["onClick","disabled"]),t(v,{color:"secondary",onClick:i.close,variant:"text"},{default:l(()=>e[14]||(e[14]=[f("Close")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const A=N(T,[["render",q],["__scopeId","data-v-c83c31af"]]);export{A as default};
