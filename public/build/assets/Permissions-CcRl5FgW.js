import{h as o,c as p,o as d,w as t,b as s,a as A,f as m,d as b,F as w,g as L,j as _}from"./app-Cdoi5j0A.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={data(){return{mainDialog:!1,permissions:[],selectedPermissions:[],selectedUserId:""}},methods:{fetchPermissions(){_.get("/v1/permissions").then(e=>{this.permissions=e.data}).catch(e=>{console.error("API Error:",e)})},showDialog(n){this.fetchPermissions(),console.log("userId:",n),this.selectedUserId=n,console.log("User ID passed to showDialog:",this.userId),this.mainDialog=!0;const e=`/v1/users/${n}/permissions`;console.log("API URL:",e),_.get(e).then(l=>{console.log("Permissions fetched:",l.data),this.selectedPermissions=l.data}).catch(l=>{console.error("API Error:",l)})},closeDialog(){this.mainDialog=!1},updatePermissions(){const n=`/v1/users/${this.selectedUserId}/permissions`,e={permissions:this.selectedPermissions};_.put(n,e).then(()=>{this.closeDialog(),this.$toastr.success("Permissions updated successfully")}).catch(l=>{console.error("API Error:",l),this.$toastr.error("Failed to update permissions")})}}};function B(n,e,l,E,r,c){const u=o("v-spacer"),v=o("v-icon"),i=o("v-btn"),f=o("v-card-title"),P=o("v-checkbox"),g=o("v-col"),h=o("v-row"),k=o("v-container"),x=o("v-card-text"),I=o("v-card-actions"),D=o("v-card"),U=o("v-dialog");return d(),p(U,{modelValue:r.mainDialog,"onUpdate:modelValue":e[1]||(e[1]=a=>r.mainDialog=a),"max-width":"800"},{default:t(()=>[s(D,{class:"my-card",outlined:""},{default:t(()=>[s(f,null,{default:t(()=>[e[3]||(e[3]=A("span",{class:"text-h5"},"Permissions",-1)),s(u),s(i,{icon:"",onClick:c.closeDialog},{default:t(()=>[s(v,null,{default:t(()=>e[2]||(e[2]=[m("mdi-close")])),_:1})]),_:1},8,["onClick"])]),_:1}),s(x,null,{default:t(()=>[s(k,null,{default:t(()=>[s(h,null,{default:t(()=>[(d(!0),b(w,null,L(r.permissions,(a,C)=>(d(),p(g,{key:C,cols:"12",md:"3"},{default:t(()=>[s(P,{modelValue:r.selectedPermissions,"onUpdate:modelValue":e[0]||(e[0]=V=>r.selectedPermissions=V),label:a.name,value:a.name,checked:r.selectedPermissions.includes(a.name)},null,8,["modelValue","label","value","checked"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),s(I,null,{default:t(()=>[s(u),s(i,{color:"error",text:"",onClick:c.closeDialog},{default:t(()=>e[4]||(e[4]=[m("Close")])),_:1},8,["onClick"]),s(i,{color:"primary",onClick:c.updatePermissions},{default:t(()=>e[5]||(e[5]=[m("Save")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const j=y(R,[["render",B],["__scopeId","data-v-a3affaed"]]);export{j as default};
