import{_ as j}from"./AppLayout-DLV5K9WW.js";import{h as o,c as q,o as z,w as l,b as t,f as a,a as i,t as B,j as u}from"./app-Cdoi5j0A.js";import Q from"./Newcall-wLmODS0j.js";import $ from"./Filter-RRZ_s0gY.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={components:{AppLayout:j,newcall:Q,filter:$},data:()=>({dialog:!1,loading:!1,dialogDelete:!1,headers:[{title:"Tenant Name",align:"start",sortable:!1,key:"tenant_name"},{title:"Email",key:"email"},{title:"Phone",key:"phone"},{title:"Property ",key:"property.property_name"}],selected:[],invoiceData:null,landlords:[],searchQuery:"",properties:[],tenants:[],tenant_name:[],property_id:[],units:[],bills:[],unit_id:"",editedIndex:-1,editedItem:{landlord_name:"",email:"",phone:""},defaultItem:{landlord_name:"",email:"",phone:"",tenant_name:"",property_id:""}}),computed:{formTitle(){return this.editedIndex===-1?"New Tenant":"Edit Tenant"}},watch:{dialog(n){n||this.close()},dialogDelete(n){n||this.closeDelete()}},created(){this.initialize(),this.fetchProperties(),this.fetchUnits()},methods:{initialize(){u.get("/tenants").then(e=>{console.log("API Response:",e.data),this.tenants=e.data}).catch(e=>{console.error("API Error:",e)})},openNewCall(n){this.$refs.newcall.show(n)},openFilter(n){this.$refs.filter.show(n)},tenantInvoice(n){const e="tenantInvoice/"+n.id,c={tenantId:this.tenantId};u.post(e,c).then(m=>{console.log("Invoice created:",m.data),this.invoiceData=m.data}).catch(m=>{console.error("Error creating invoice:",m)})},save(){let n;this.editedIndex>-1?n=u.put(`/tenant/${this.editedItem.id}`,this.editedItem):n=u.post("/tenant",this.editedItem),n.then(e=>{this.editedIndex>-1?Object.assign(this.tenants[this.editedIndex],e.data.data):this.tenants.push(e.data.data),this.close()}).catch(e=>console.error("Saving error:",e))},performSearch(){this.loading=!0;const n="/landlords/search?query="+this.searchQuery;u.get(n).then(e=>{console.log("Search response:",e.data),this.tenants=e.data,this.loading=!1}).catch(e=>{console.error("Search error:",e),this.loading=!1})},fetchUnits(){u.get("units").then(e=>{console.log("units response:",e.data),this.units=e.data}).catch(e=>{console.error("failed to load units:",e)})},fetchProperties(){u.get("properties").then(e=>{console.log("properties response:",e.data),this.properties=e.data}).catch(e=>{console.error("failed to load properties:",e)})}}},M={class:"text-h5"},O={ref:"filter"};function K(n,e,c,m,G,p){const r=o("v-icon"),f=o("v-card"),s=o("v-col"),v=o("v-spacer"),g=o("v-row"),C=o("VCard"),I=o("v-tab"),A=o("v-tabs"),b=o("v-text-field"),y=o("v-container"),P=o("v-toolbar-title"),h=o("v-divider"),V=o("v-card-title"),k=o("v-select"),L=o("v-file-input"),N=o("v-card-text"),_=o("v-btn"),w=o("v-card-actions"),R=o("V-card"),U=o("v-dialog"),D=o("v-toolbar"),T=o("v-data-table"),S=o("newcall"),E=o("AppLayout");return z(),q(E,null,{default:l(()=>[t(C,{class:"my-card"},{default:l(()=>[t(g,{class:"my-4"},{default:l(()=>[t(s,null,{default:l(()=>[t(f,{class:"pa-4"},{default:l(()=>[t(r,{onClick:p.openNewCall,class:"call-action",left:""},{default:l(()=>e[8]||(e[8]=[a("mdi-phone")])),_:1},8,["onClick"]),e[12]||(e[12]=a(" Make a new Call")),e[13]||(e[13]=i("br",null,null,-1)),t(r,null,{default:l(()=>e[9]||(e[9]=[a("mdi-account-supervisor")])),_:1}),e[14]||(e[14]=a(" Call an agent")),e[15]||(e[15]=i("br",null,null,-1)),t(r,null,{default:l(()=>e[10]||(e[10]=[a("mdi-phone-missed")])),_:1}),e[16]||(e[16]=a(" Missed Calls 26")),e[17]||(e[17]=i("br",null,null,-1)),t(r,null,{default:l(()=>e[11]||(e[11]=[a("mdi-format-list-checks")])),_:1}),e[18]||(e[18]=a(" Check Queue")),e[19]||(e[19]=i("br",null,null,-1))]),_:1})]),_:1}),t(v),t(s,null,{default:l(()=>[t(f,{class:"pa-4"},{default:l(()=>[t(r,null,{default:l(()=>e[20]||(e[20]=[a(" mdi-phone")])),_:1}),e[23]||(e[23]=a(" Calls made")),e[24]||(e[24]=i("br",null,null,-1)),t(r,null,{default:l(()=>e[21]||(e[21]=[a("mdi-phone-hangup")])),_:1}),e[25]||(e[25]=a(" Calls rejected")),e[26]||(e[26]=i("br",null,null,-1)),t(r,null,{default:l(()=>e[22]||(e[22]=[a("mdi-phone-incoming")])),_:1}),e[27]||(e[27]=a(" Incoming Calls")),e[28]||(e[28]=i("br",null,null,-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(f,null,{default:l(()=>[t(A,{modelValue:n.tab,"onUpdate:modelValue":e[0]||(e[0]=d=>n.tab=d)},{default:l(()=>[t(I,{value:"tenants"},{default:l(()=>e[29]||(e[29]=[a("Tenants")])),_:1}),t(I,{value:"landlords"},{default:l(()=>e[30]||(e[30]=[a("Landlords")])),_:1}),t(I,{value:"calls"},{default:l(()=>e[31]||(e[31]=[a("Calls")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(y,null,{default:l(()=>[t(g,null,{default:l(()=>[t(s,null,{default:l(()=>[t(b,{required:"",id:"input-search",label:"Search Contact ( phone, name,property)","prepend-icon":"mdi-magnify","append-icon":"mdi-tune",onClick:p.openFilter,type:"text"},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),t(f,null,{default:l(()=>[t(C,{class:"my-card",outlined:""},{default:l(()=>[t(T,{"show-select":"",headers:n.headers,loading:n.loading,items:n.tenants,"sort-by":[{key:"tenant_name",order:"asc"}]},{top:l(()=>[t(D,null,{default:l(()=>[t(P,null,{default:l(()=>e[32]||(e[32]=[a("Tenant")])),_:1}),t(h,{class:"mx-4",inset:"",vertical:""}),t(v),t(U,{modelValue:n.dialog,"onUpdate:modelValue":e[6]||(e[6]=d=>n.dialog=d),"max-width":"700px"},{default:l(()=>[t(R,null,{default:l(()=>[t(V,null,{default:l(()=>[i("span",M,B(p.formTitle),1)]),_:1}),t(N,null,{default:l(()=>[t(y,null,{default:l(()=>[t(g,null,{default:l(()=>[t(s,{cols:"12",sm:"6",md:"4"},{default:l(()=>[t(b,{modelValue:n.editedItem.tenant_name,"onUpdate:modelValue":e[1]||(e[1]=d=>n.editedItem.tenant_name=d),label:"Tanant Name"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12",sm:"6",md:"4"},{default:l(()=>[t(b,{modelValue:n.editedItem.email,"onUpdate:modelValue":e[2]||(e[2]=d=>n.editedItem.email=d),label:"Email"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12",sm:"6",md:"4"},{default:l(()=>[t(b,{modelValue:n.editedItem.phone,"onUpdate:modelValue":e[3]||(e[3]=d=>n.editedItem.phone=d),label:"phone"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12",sm:"6",md:"4"},{default:l(()=>[t(k,{modelValue:n.editedItem.property_id,"onUpdate:modelValue":e[4]||(e[4]=d=>n.editedItem.property_id=d),items:n.properties,"item-title":"property_name",label:"Property Name","item-value":"id"},null,8,["modelValue","items"])]),_:1}),t(s,{cols:"12",sm:"6",md:"4"},{default:l(()=>[t(k,{modelValue:n.editedItem.unit_id,"onUpdate:modelValue":e[5]||(e[5]=d=>n.editedItem.unit_id=d),items:n.units,"item-title":"unit_number",label:"Account Number","item-value":"id"},null,8,["modelValue","items"])]),_:1}),t(L,{label:"Select  file",accept:"pfd",onChange:n.uploadaAgreement},null,8,["onChange"])]),_:1})]),_:1})]),_:1}),t(w,null,{default:l(()=>[t(v),t(_,{color:"blue-darken-1",variant:"text",onClick:n.close},{default:l(()=>e[33]||(e[33]=[a(" Cancel ")])),_:1},8,["onClick"]),t(_,{color:"blue-darken-1",variant:"text",onClick:p.save},{default:l(()=>e[34]||(e[34]=[a(" Save ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:n.dialogDelete,"onUpdate:modelValue":e[7]||(e[7]=d=>n.dialogDelete=d),"max-width":"500px"},{default:l(()=>[t(f,null,{default:l(()=>[t(V,{class:"text-h5"},{default:l(()=>e[35]||(e[35]=[a("Are you sure you want to delete this item?")])),_:1}),t(w,null,{default:l(()=>[t(v),t(_,{color:"blue-darken-1",variant:"text",onClick:n.closeDelete},{default:l(()=>e[36]||(e[36]=[a("Cancel")])),_:1},8,["onClick"]),t(_,{color:"blue-darken-1",variant:"text",onClick:n.deleteItemConfirm},{default:l(()=>e[37]||(e[37]=[a("OK")])),_:1},8,["onClick"]),t(v)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"no-data":l(()=>[t(_,{color:"primary",onClick:p.initialize},{default:l(()=>e[38]||(e[38]=[a(" Reset ")])),_:1},8,["onClick"])]),_:1},8,["headers","loading","items"]),t(S,{ref:"newcall"},null,512),i("filter",O,null,512)]),_:1})]),_:1})]),_:1})}const Z=x(F,[["render",K],["__scopeId","data-v-ec3f6381"]]);export{Z as default};
