import{_ as w}from"./AppLayout-PU2Nz2pZ.js";import{m as u,h as a,o as L,c as N,w as o,b as e,q as x,f as i,s as S,a as O,t as R}from"./app-5VpZBQ26.js";import{_ as z}from"./_plugin-vue_export-helper-x3n3nnut.js";const j={components:{AppLayout:w},data:()=>({dialog:!1,loading:!1,dialogDelete:!1,headers:[{title:"Property Name",align:"start",sortable:!1,key:"property_name"},{title:"Address",key:"address"},{title:"Email",key:"email"},{title:"Phone Number",key:"phone"},{title:"Description",key:"description"},{title:"Landlord",key:"landlord.landlord_name"},{title:"Units",key:"number_of_units"},{title:"Actions",key:"actions",sortable:!1}],properties:[],landlords:[],editedIndex:-1,searchQuery:"",editedItem:{property_name:"",email:"",phone:"",description:"",number_of_units:"",address:""},defaultItem:{property_name:"",email:"",phone:"",landlord_id:"",number_of_units:"",description:""}}),computed:{formTitle(){return this.editedIndex===-1?"New Property":"Edit Property"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},created(){this.initialize(),this.fetchlandlord()},methods:{initialize(){u.get("/api/property").then(l=>{console.log("API Response:",l.data),this.properties=l.data}).catch(l=>{console.error("API Error:",l)})},editItem(t){this.editedIndex=this.properties.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.properties.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){u.delete(`/api/property/${this.editedItem.id}`).then(()=>{this.properties.splice(this.editedIndex,1),this.closeDelete()}).catch(t=>console.error("Deletion error:",t))},close(){this.dialog=!1,this.resetForm()},closeDelete(){this.dialogDelete=!1,this.resetForm()},resetForm(){this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},save(){let t;this.editedIndex>-1?t=u.put(`/api/property/${this.editedItem.id}`,this.editedItem):t=u.post("/api/property",this.editedItem),t.then(l=>{this.editedIndex>-1?Object.assign(this.properties[this.editedIndex],l.data.data):this.properties.push(l.data.data),this.close()}).catch(l=>console.error("Saving error:",l))},performSearch(){this.loading=!0;const t="/api/property/search?query="+this.searchQuery;u.get(t).then(l=>{console.log("Search response:",l.data),this.properties=l.data,this.loading=!1}).catch(l=>{console.error("Search error:",l),this.loading=!1})},fetchlandlord(){u.get("/api/landlords").then(l=>{console.log("Landlords response:",l.data),this.landlords=l.data}).catch(l=>{console.error("failed to load landlords:",l)})}}},E={class:"text-h5"};function K(t,l,Q,q,B,n){const s=a("v-text-field"),c=a("v-container"),_=a("VCard"),b=a("v-toolbar-title"),g=a("v-divider"),p=a("v-spacer"),m=a("v-btn"),f=a("v-card-title"),r=a("v-col"),V=a("v-select"),k=a("v-row"),C=a("v-card-text"),h=a("v-card-actions"),v=a("v-card"),I=a("v-dialog"),U=a("v-toolbar"),y=a("v-icon"),P=a("v-data-table"),A=a("AppLayout");return L(),N(A,null,{default:o(()=>[e(_,{class:"my-card"},{default:o(()=>[e(c,null,{default:o(()=>[e(s,{modelValue:t.searchQuery,"onUpdate:modelValue":l[0]||(l[0]=d=>t.searchQuery=d),label:"Search",onKeyup:x(n.performSearch,["enter"]),variant:"outlined"},null,8,["modelValue","onKeyup"])]),_:1})]),_:1}),e(_,{class:"my-card",outlined:""},{default:o(()=>[e(P,{headers:t.headers,loading:t.loading,items:t.properties,"sort-by":[{key:"property_name",order:"asc"}]},{top:o(()=>[e(U,{flat:""},{default:o(()=>[e(b,null,{default:o(()=>[i("Property")]),_:1}),e(g,{class:"mx-4",inset:"",vertical:""}),e(p),e(I,{modelValue:t.dialog,"onUpdate:modelValue":l[8]||(l[8]=d=>t.dialog=d),"max-width":"500px"},{activator:o(({props:d})=>[e(m,S({color:"primary",dark:"",class:"mb-2"},d),{default:o(()=>[i(" New Property ")]),_:2},1040)]),default:o(()=>[e(v,null,{default:o(()=>[e(f,null,{default:o(()=>[O("span",E,R(n.formTitle),1)]),_:1}),e(C,null,{default:o(()=>[e(c,null,{default:o(()=>[e(k,null,{default:o(()=>[e(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[e(s,{modelValue:t.editedItem.property_name,"onUpdate:modelValue":l[1]||(l[1]=d=>t.editedItem.property_name=d),label:"Property Name"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[e(s,{modelValue:t.editedItem.email,"onUpdate:modelValue":l[2]||(l[2]=d=>t.editedItem.email=d),label:"Email"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[e(s,{modelValue:t.editedItem.phone,"onUpdate:modelValue":l[3]||(l[3]=d=>t.editedItem.phone=d),label:"phone"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[e(s,{modelValue:t.editedItem.address,"onUpdate:modelValue":l[4]||(l[4]=d=>t.editedItem.address=d),label:"Address"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[e(s,{modelValue:t.editedItem.description,"onUpdate:modelValue":l[5]||(l[5]=d=>t.editedItem.description=d),label:"Description"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[e(s,{modelValue:t.editedItem.number_of_units,"onUpdate:modelValue":l[6]||(l[6]=d=>t.editedItem.number_of_units=d),label:"Units"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",sm:"6",md:"4"},{default:o(()=>[e(V,{modelValue:t.editedItem.landlord_id,"onUpdate:modelValue":l[7]||(l[7]=d=>t.editedItem.landlord_id=d),items:t.landlords,"item-title":"landlord_name",label:"Landlord Name","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),e(h,null,{default:o(()=>[e(p),e(m,{color:"blue-darken-1",variant:"text",onClick:n.close},{default:o(()=>[i(" Cancel ")]),_:1},8,["onClick"]),e(m,{color:"blue-darken-1",variant:"text",onClick:n.save},{default:o(()=>[i(" Save ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(I,{modelValue:t.dialogDelete,"onUpdate:modelValue":l[9]||(l[9]=d=>t.dialogDelete=d),"max-width":"500px"},{default:o(()=>[e(v,null,{default:o(()=>[e(f,{class:"text-h5"},{default:o(()=>[i("Are you sure you want to delete this item?")]),_:1}),e(h,null,{default:o(()=>[e(p),e(m,{color:"blue-darken-1",variant:"text",onClick:n.closeDelete},{default:o(()=>[i("Cancel")]),_:1},8,["onClick"]),e(m,{color:"blue-darken-1",variant:"text",onClick:n.deleteItemConfirm},{default:o(()=>[i("OK")]),_:1},8,["onClick"]),e(p)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":o(({item:d})=>[e(y,{size:"small",class:"me-2",onClick:D=>n.editItem(d)},{default:o(()=>[i(" mdi-pencil ")]),_:2},1032,["onClick"]),e(y,{size:"small",onClick:D=>n.deleteItem(d)},{default:o(()=>[i(" mdi-delete ")]),_:2},1032,["onClick"])]),"no-data":o(()=>[e(m,{color:"primary",onClick:n.initialize},{default:o(()=>[i(" Reset ")]),_:1},8,["onClick"])]),_:1},8,["headers","loading","items"])]),_:1})]),_:1})}const H=z(j,[["render",K],["__scopeId","data-v-9060a667"]]);export{H as default};
