import{_ as T}from"./AppLayout-MwnqGhac.js";import{h as f,i as n,o as c,c as j,w as o,b as e,f as s,d as b,e as k,m as E,A as K,a as w,t as G,p as J,q as M}from"./app-C4aOM3xK.js";import W from"./BookVacant-3d5vQWLm.js";import{_ as X}from"./_plugin-vue_export-helper-x3n3nnut.js";const Y={components:{AppLayout:T,bookvacant:W},data(){return{bookingHeaders:[{title:"Booking ID",value:"id"},{title:"Vacant Id",value:"vacant_id"},{title:"Properpty Name",value:"property.property_name"},{title:"Date",value:"date"},{title:"Status",value:"status"}],bookings:[],tab:"viewPosts",valid:!0,properties:[],property_name:"",property_id:"",rent:"",vacants:[],headers:[{title:"Vacant ID",key:"id"},{title:"Property Name",key:"property.property_name"},{title:"Description",key:"description"},{title:"Rent",key:"rent"},{title:"Units",key:"number_of_units"},{title:"Actions",key:"actions",sortable:!1}]}},created(){this.fetchProperties(),this.viewPosts(),this.fetchBookings()},computed:{tenant_id(){return this.$page.props.auth.user?this.$page.props.auth.user.id:null}},methods:{OpenBookVacant(t){this.$refs.bookVacant.show(t)},fetchProperties(){f.get("/properties").then(l=>{console.log("properties response:",l.data),this.properties=l.data}).catch(l=>{console.error("failed to load properties:",l)})},viewPosts(){f.get("vacant").then(l=>{console.log("vacants response:",l.data),this.vacants=l.data}).catch(l=>{console.error("failed to load vacants:",l)})},fetchBookings(){f.get("/bookings").then(t=>{this.bookings=Array.isArray(t.data)?t.data:[]}).catch(t=>{console.error("Failed to load bookings:",t)})}}},Z=t=>(J("data-v-e65d8c82"),t=t(),M(),t),$={key:0},x={key:0},ee=Z(()=>w("span",null,"Book Vacant",-1)),te={key:0},oe={class:"text-h5"};function le(t,l,ae,ne,d,B){const i=n("v-text-field"),V=n("v-container"),A=n("VCard"),y=n("v-toolbar-title"),g=n("v-toolbar"),C=n("v-tab"),D=n("v-tabs"),u=n("v-card"),R=n("v-select"),S=n("v-file-input"),r=n("v-btn"),L=n("v-form"),_=n("v-icon"),N=n("v-tooltip"),I=n("v-data-table"),q=n("v-divider"),p=n("v-spacer"),h=n("v-card-title"),m=n("v-col"),z=n("v-row"),H=n("v-card-text"),U=n("v-card-actions"),P=n("v-dialog"),O=n("bookvacant"),F=n("AppLayout");return c(),j(F,null,{default:o(()=>[e(A,{class:"my-card"},{default:o(()=>[e(V,null,{default:o(()=>[e(i,{modelValue:t.searchQuery,"onUpdate:modelValue":l[0]||(l[0]=a=>t.searchQuery=a),label:"Search",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,{flat:""},{default:o(()=>[e(y,{class:"text-center",style:{width:"100%"}},{default:o(()=>[s("Book")]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(D,{modelValue:d.tab,"onUpdate:modelValue":l[1]||(l[1]=a=>d.tab=a),"background-color":"transparent"},{default:o(()=>[e(C,{value:"viewPosts"},{default:o(()=>[s("View Posts")]),_:1}),e(C,{value:"fetchBookings"},{default:o(()=>[s("Bookings")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{class:"my-card"},{default:o(()=>[d.tab==="postVacant"?(c(),b("div",$,[e(L,{ref:"form",modelValue:d.valid,"onUpdate:modelValue":l[7]||(l[7]=a=>d.valid=a),"lazy-validation":""},{default:o(()=>[e(R,{modelValue:d.property_id,"onUpdate:modelValue":l[2]||(l[2]=a=>d.property_id=a),items:d.properties,"item-title":"property_name",label:"Property","item-value":"id"},null,8,["modelValue","items"]),e(i,{modelValue:t.ad.description,"onUpdate:modelValue":l[3]||(l[3]=a=>t.ad.description=a),label:"Description",required:"",rules:t.descriptionRules},null,8,["modelValue","rules"]),e(i,{modelValue:t.ad.number_of_units,"onUpdate:modelValue":l[4]||(l[4]=a=>t.ad.number_of_units=a),label:"Number of units",required:"",rules:t.number_of_unitsRules},null,8,["modelValue","rules"]),e(i,{modelValue:t.ad.rent,"onUpdate:modelValue":l[5]||(l[5]=a=>t.ad.rent=a),label:"rent",required:"",rules:d.rent},null,8,["modelValue","rules"]),e(S,{modelValue:t.ad.images,"onUpdate:modelValue":l[6]||(l[6]=a=>t.ad.images=a),label:"Property images",multiple:"",accept:"image/png, image/jpeg, image/bmp"},null,8,["modelValue"]),e(r,{disabled:!d.valid,onClick:t.submitAd},{default:o(()=>[s("Submit")]),_:1},8,["disabled","onClick"])]),_:1},8,["modelValue"])])):k("",!0)]),_:1}),e(u,{class:"my-card"},{default:o(()=>[d.tab==="viewPosts"?(c(),b("div",x,[e(I,{headers:d.headers,items:d.vacants,class:"elevation-1"},{"item.actions":o(({item:a})=>[e(N,{bottom:""},{activator:o(({on:v,attrs:Q})=>[e(r,E({small:"",color:"info",icon:""},K(v),Q,{onClick:de=>B.OpenBookVacant(a)}),{default:o(()=>[e(_,null,{default:o(()=>[s("mdi-calendar-check")]),_:1})]),_:2},1040,["onClick"])]),default:o(()=>[ee]),_:2},1024)]),_:1},8,["headers","items"])])):k("",!0)]),_:1}),e(u,{class:"my-card"},{default:o(()=>[d.tab==="fetchBookings"?(c(),b("div",te,[e(I,{headers:d.bookingHeaders,items:d.bookings,"sort-by":[{key:"calories",order:"asc"}]},{top:o(()=>[e(g,{flat:""},{default:o(()=>[e(y,null,{default:o(()=>[s("Bookings")]),_:1}),e(q,{class:"mx-4",inset:"",vertical:""}),e(p),e(P,{modelValue:t.dialog,"onUpdate:modelValue":l[13]||(l[13]=a=>t.dialog=a),"max-width":"500px"},{default:o(()=>[e(u,null,{default:o(()=>[e(h,null,{default:o(()=>[w("span",oe,G(t.formTitle),1)]),_:1}),e(H,null,{default:o(()=>[e(V,null,{default:o(()=>[e(z,null,{default:o(()=>[e(m,{cols:"12",md:"4",sm:"6"},{default:o(()=>[e(i,{modelValue:t.editedItem.id,"onUpdate:modelValue":l[8]||(l[8]=a=>t.editedItem.id=a),label:"Dessert name"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4",sm:"6"},{default:o(()=>[e(i,{modelValue:t.editedItem.vacant_id,"onUpdate:modelValue":l[9]||(l[9]=a=>t.editedItem.vacant_id=a),label:"Calories"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4",sm:"6"},{default:o(()=>[e(i,{modelValue:t.editedItem.property_id,"onUpdate:modelValue":l[10]||(l[10]=a=>t.editedItem.property_id=a),label:"Fat (g)"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4",sm:"6"},{default:o(()=>[e(i,{modelValue:t.editedItem.date,"onUpdate:modelValue":l[11]||(l[11]=a=>t.editedItem.date=a),label:"Carbs (g)"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4",sm:"6"},{default:o(()=>[e(i,{modelValue:t.editedItem.status,"onUpdate:modelValue":l[12]||(l[12]=a=>t.editedItem.status=a),label:"Protein (g)"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(U,null,{default:o(()=>[e(p),e(r,{color:"blue-darken-1",variant:"text",onClick:t.close},{default:o(()=>[s(" Cancel ")]),_:1},8,["onClick"]),e(r,{color:"blue-darken-1",variant:"text",onClick:t.save},{default:o(()=>[s(" Save ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(P,{modelValue:t.dialogDelete,"onUpdate:modelValue":l[14]||(l[14]=a=>t.dialogDelete=a),"max-width":"500px"},{default:o(()=>[e(u,null,{default:o(()=>[e(h,{class:"text-h5"},{default:o(()=>[s("Are you sure you want to delete this item?")]),_:1}),e(U,null,{default:o(()=>[e(p),e(r,{color:"blue-darken-1",variant:"text",onClick:t.closeDelete},{default:o(()=>[s("Cancel")]),_:1},8,["onClick"]),e(r,{color:"blue-darken-1",variant:"text",onClick:t.deleteItemConfirm},{default:o(()=>[s("OK")]),_:1},8,["onClick"]),e(p)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":o(({item:a})=>[e(_,{class:"me-2",size:"small",onClick:v=>t.editItem(a)},{default:o(()=>[s(" mdi-pencil ")]),_:2},1032,["onClick"]),e(_,{size:"small",onClick:v=>t.deleteItem(a)},{default:o(()=>[s(" mdi-delete ")]),_:2},1032,["onClick"])]),"no-data":o(()=>[e(r,{color:"primary",onClick:t.initialize},{default:o(()=>[s(" Reset ")]),_:1},8,["onClick"])]),_:1},8,["headers","items"])])):k("",!0),e(O,{ref:"bookVacant"},null,512)]),_:1})]),_:1})}const me=X(Y,[["render",le],["__scopeId","data-v-e65d8c82"]]);export{me as default};
