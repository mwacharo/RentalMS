import{j as m,h as s,c as u,o as d,w as t,b as o,a as w,f as _,d as F,F as I,g as U}from"./app-Cdoi5j0A.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={data(){return{mainDialog:!1,permissions:[],selectedPermissions:[],selectedRoleId:""}},methods:{fetchPermissions(){m.get("/v1/permissions").then(e=>{this.permissions=e.data}).catch(e=>{console.error("Error fetching permissions:",e),this.$toastr.error("Failed to fetch permissions")})},showDialog(n){this.fetchPermissions(),this.selectedRoleId=n,console.log("Role ID passed to showDialog:",n),this.mainDialog=!0;const e=`/v1/roles/${n}/permissions`;console.log("Fetching permissions from:",e),m.get(e).then(l=>{console.log("Permissions fetched:",l.data),this.selectedPermissions=l.data.permissions}).catch(l=>{console.error("Error fetching role permissions:",l),this.$toastr.error("Failed to fetch role permissions")})},closeDialog(){this.mainDialog=!1},updatePermissions(){const n=`/v1/roles/${this.selectedRoleId}/permissions`,e={permissions:this.selectedPermissions};m.put(n,e).then(()=>{this.closeDialog(),this.$toastr.success("Permissions updated successfully")}).catch(l=>{console.error("Error updating permissions:",l),this.$toastr.error("Failed to update permissions")})}}};function A(n,e,l,B,i,a){const p=s("v-spacer"),f=s("v-icon"),c=s("v-btn"),v=s("v-card-title"),h=s("v-checkbox"),g=s("v-col"),P=s("v-row"),x=s("v-container"),k=s("v-card-text"),D=s("v-card-actions"),C=s("v-card"),R=s("v-dialog");return d(),u(R,{modelValue:i.mainDialog,"onUpdate:modelValue":e[1]||(e[1]=r=>i.mainDialog=r),"max-width":"800"},{default:t(()=>[o(C,{class:"my-card",outlined:""},{default:t(()=>[o(v,null,{default:t(()=>[e[3]||(e[3]=w("span",{class:"text-h5"},"Permissions",-1)),o(p),o(c,{icon:"",onClick:a.closeDialog},{default:t(()=>[o(f,null,{default:t(()=>e[2]||(e[2]=[_("mdi-close")])),_:1})]),_:1},8,["onClick"])]),_:1}),o(k,null,{default:t(()=>[o(x,null,{default:t(()=>[o(P,null,{default:t(()=>[(d(!0),F(I,null,U(i.permissions,(r,V)=>(d(),u(g,{key:V,cols:"12",md:"3"},{default:t(()=>[o(h,{modelValue:i.selectedPermissions,"onUpdate:modelValue":e[0]||(e[0]=b=>i.selectedPermissions=b),label:r.name,value:r.name},null,8,["modelValue","label","value"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),o(D,null,{default:t(()=>[o(p),o(c,{color:"error",text:"",onClick:a.closeDialog},{default:t(()=>e[4]||(e[4]=[_("Close")])),_:1},8,["onClick"]),o(c,{color:"primary",onClick:a.updatePermissions},{default:t(()=>e[5]||(e[5]=[_("Save")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const $=y(L,[["render",A]]);export{$ as default};
