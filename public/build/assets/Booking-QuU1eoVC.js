import{_ as T}from"./AppLayout-DLV5K9WW.js";import{h as n,c as E,o as v,w as o,b as t,f as s,d as b,e as k,a as w,m as K,q as G,t as J,j as V}from"./app-Cdoi5j0A.js";import M from"./BookVacant-CuXrlvvJ.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X={components:{AppLayout:T,bookvacant:M},data(){return{bookingHeaders:[{title:"Booking ID",value:"id"},{title:"Vacant Id",value:"vacant_id"},{title:"Properpty Name",value:"property.property_name"},{title:"Date",value:"date"},{title:"Status",value:"status"}],bookings:[],tab:"viewPosts",valid:!0,properties:[],property_name:"",property_id:"",rent:"",vacants:[],headers:[{title:"Vacant ID",key:"id"},{title:"Property Name",key:"property.property_name"},{title:"Description",key:"description"},{title:"Rent",key:"rent"},{title:"Units",key:"number_of_units"},{title:"Actions",key:"actions",sortable:!1}]}},created(){this.fetchProperties(),this.viewPosts(),this.fetchBookings()},computed:{tenant_id(){return this.$page.props.auth.user?this.$page.props.auth.user.id:null}},methods:{OpenBookVacant(l){this.$refs.bookVacant.show(l)},fetchProperties(){V.get("/properties").then(e=>{console.log("properties response:",e.data),this.properties=e.data}).catch(e=>{console.error("failed to load properties:",e)})},viewPosts(){V.get("vacant").then(e=>{console.log("vacants response:",e.data),this.vacants=e.data}).catch(e=>{console.error("failed to load vacants:",e)})},fetchBookings(){V.get("/bookings").then(l=>{this.bookings=Array.isArray(l.data)?l.data:[]}).catch(l=>{console.error("Failed to load bookings:",l)})}}},Y={key:0},Z={key:0},$={key:0},h={class:"text-h5"};function x(l,e,ee,te,d,A){const i=n("v-text-field"),c=n("v-container"),D=n("VCard"),y=n("v-toolbar-title"),g=n("v-toolbar"),C=n("v-tab"),R=n("v-tabs"),u=n("v-card"),L=n("v-select"),N=n("v-file-input"),r=n("v-btn"),S=n("v-form"),f=n("v-icon"),q=n("v-tooltip"),I=n("v-data-table"),z=n("v-divider"),p=n("v-spacer"),U=n("v-card-title"),m=n("v-col"),H=n("v-row"),O=n("v-card-text"),P=n("v-card-actions"),B=n("v-dialog"),j=n("bookvacant"),F=n("AppLayout");return v(),E(F,null,{default:o(()=>[t(D,{class:"my-card"},{default:o(()=>[t(c,null,{default:o(()=>[t(i,{modelValue:l.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=a=>l.searchQuery=a),label:"Search",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(g,{flat:""},{default:o(()=>[t(y,{class:"text-center",style:{width:"100%"}},{default:o(()=>e[15]||(e[15]=[s("Book")])),_:1})]),_:1}),t(u,null,{default:o(()=>[t(R,{modelValue:d.tab,"onUpdate:modelValue":e[1]||(e[1]=a=>d.tab=a),"background-color":"transparent"},{default:o(()=>[t(C,{value:"viewPosts"},{default:o(()=>e[16]||(e[16]=[s("View Posts")])),_:1}),t(C,{value:"fetchBookings"},{default:o(()=>e[17]||(e[17]=[s("Bookings")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(u,{class:"my-card"},{default:o(()=>[d.tab==="postVacant"?(v(),b("div",Y,[t(S,{ref:"form",modelValue:d.valid,"onUpdate:modelValue":e[7]||(e[7]=a=>d.valid=a),"lazy-validation":""},{default:o(()=>[t(L,{modelValue:d.property_id,"onUpdate:modelValue":e[2]||(e[2]=a=>d.property_id=a),items:d.properties,"item-title":"property_name",label:"Property","item-value":"id"},null,8,["modelValue","items"]),t(i,{modelValue:l.ad.description,"onUpdate:modelValue":e[3]||(e[3]=a=>l.ad.description=a),label:"Description",required:"",rules:l.descriptionRules},null,8,["modelValue","rules"]),t(i,{modelValue:l.ad.number_of_units,"onUpdate:modelValue":e[4]||(e[4]=a=>l.ad.number_of_units=a),label:"Number of units",required:"",rules:l.number_of_unitsRules},null,8,["modelValue","rules"]),t(i,{modelValue:l.ad.rent,"onUpdate:modelValue":e[5]||(e[5]=a=>l.ad.rent=a),label:"rent",required:"",rules:d.rent},null,8,["modelValue","rules"]),t(N,{modelValue:l.ad.images,"onUpdate:modelValue":e[6]||(e[6]=a=>l.ad.images=a),label:"Property images",multiple:"",accept:"image/png, image/jpeg, image/bmp"},null,8,["modelValue"]),t(r,{disabled:!d.valid,onClick:l.submitAd},{default:o(()=>e[18]||(e[18]=[s("Submit")])),_:1},8,["disabled","onClick"])]),_:1},8,["modelValue"])])):k("",!0)]),_:1}),t(u,{class:"my-card"},{default:o(()=>[d.tab==="viewPosts"?(v(),b("div",Z,[t(I,{headers:d.headers,items:d.vacants,class:"elevation-1"},{"item.actions":o(({item:a})=>[t(q,{bottom:""},{activator:o(({on:_,attrs:Q})=>[t(r,K({small:"",color:"info",icon:""},G(_),Q,{onClick:oe=>A.OpenBookVacant(a)}),{default:o(()=>[t(f,null,{default:o(()=>e[19]||(e[19]=[s("mdi-calendar-check")])),_:1})]),_:2},1040,["onClick"])]),default:o(()=>[e[20]||(e[20]=w("span",null,"Book Vacant",-1))]),_:2},1024)]),_:1},8,["headers","items"])])):k("",!0)]),_:1}),t(u,{class:"my-card"},{default:o(()=>[d.tab==="fetchBookings"?(v(),b("div",$,[t(I,{headers:d.bookingHeaders,items:d.bookings,"sort-by":[{key:"calories",order:"asc"}]},{top:o(()=>[t(g,{flat:""},{default:o(()=>[t(y,null,{default:o(()=>e[21]||(e[21]=[s("Bookings")])),_:1}),t(z,{class:"mx-4",inset:"",vertical:""}),t(p),t(B,{modelValue:l.dialog,"onUpdate:modelValue":e[13]||(e[13]=a=>l.dialog=a),"max-width":"500px"},{default:o(()=>[t(u,null,{default:o(()=>[t(U,null,{default:o(()=>[w("span",h,J(l.formTitle),1)]),_:1}),t(O,null,{default:o(()=>[t(c,null,{default:o(()=>[t(H,null,{default:o(()=>[t(m,{cols:"12",md:"4",sm:"6"},{default:o(()=>[t(i,{modelValue:l.editedItem.id,"onUpdate:modelValue":e[8]||(e[8]=a=>l.editedItem.id=a),label:"Dessert name"},null,8,["modelValue"])]),_:1}),t(m,{cols:"12",md:"4",sm:"6"},{default:o(()=>[t(i,{modelValue:l.editedItem.vacant_id,"onUpdate:modelValue":e[9]||(e[9]=a=>l.editedItem.vacant_id=a),label:"Calories"},null,8,["modelValue"])]),_:1}),t(m,{cols:"12",md:"4",sm:"6"},{default:o(()=>[t(i,{modelValue:l.editedItem.property_id,"onUpdate:modelValue":e[10]||(e[10]=a=>l.editedItem.property_id=a),label:"Fat (g)"},null,8,["modelValue"])]),_:1}),t(m,{cols:"12",md:"4",sm:"6"},{default:o(()=>[t(i,{modelValue:l.editedItem.date,"onUpdate:modelValue":e[11]||(e[11]=a=>l.editedItem.date=a),label:"Carbs (g)"},null,8,["modelValue"])]),_:1}),t(m,{cols:"12",md:"4",sm:"6"},{default:o(()=>[t(i,{modelValue:l.editedItem.status,"onUpdate:modelValue":e[12]||(e[12]=a=>l.editedItem.status=a),label:"Protein (g)"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(P,null,{default:o(()=>[t(p),t(r,{color:"blue-darken-1",variant:"text",onClick:l.close},{default:o(()=>e[22]||(e[22]=[s(" Cancel ")])),_:1},8,["onClick"]),t(r,{color:"blue-darken-1",variant:"text",onClick:l.save},{default:o(()=>e[23]||(e[23]=[s(" Save ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:l.dialogDelete,"onUpdate:modelValue":e[14]||(e[14]=a=>l.dialogDelete=a),"max-width":"500px"},{default:o(()=>[t(u,null,{default:o(()=>[t(U,{class:"text-h5"},{default:o(()=>e[24]||(e[24]=[s("Are you sure you want to delete this item?")])),_:1}),t(P,null,{default:o(()=>[t(p),t(r,{color:"blue-darken-1",variant:"text",onClick:l.closeDelete},{default:o(()=>e[25]||(e[25]=[s("Cancel")])),_:1},8,["onClick"]),t(r,{color:"blue-darken-1",variant:"text",onClick:l.deleteItemConfirm},{default:o(()=>e[26]||(e[26]=[s("OK")])),_:1},8,["onClick"]),t(p)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":o(({item:a})=>[t(f,{class:"me-2",size:"small",onClick:_=>l.editItem(a)},{default:o(()=>e[27]||(e[27]=[s(" mdi-pencil ")])),_:2},1032,["onClick"]),t(f,{size:"small",onClick:_=>l.deleteItem(a)},{default:o(()=>e[28]||(e[28]=[s(" mdi-delete ")])),_:2},1032,["onClick"])]),"no-data":o(()=>[t(r,{color:"primary",onClick:l.initialize},{default:o(()=>e[29]||(e[29]=[s(" Reset ")])),_:1},8,["onClick"])]),_:1},8,["headers","items"])])):k("",!0),t(j,{ref:"bookVacant"},null,512)]),_:1})]),_:1})}const se=W(X,[["render",x],["__scopeId","data-v-e65d8c82"]]);export{se as default};
