import{_ as k}from"./_plugin-vue_export-helper-x3n3nnut.js";import{i,o as N,c as P,w as l,b as e,f,a as s,t as c,p as q,q as w}from"./app-HGAGYWQr.js";const T={props:{bills:{type:Array,required:!0}},data(){return{dialog:!1,valid:!0,tableHeaders:[{title:"Item",value:"item"},{title:"Unit Cost",value:"unit_cost"},{title:"Number of Units",value:"number_of_units"},{title:"Amount",value:"amount"}],paymentStatuses:["Paid","Pending","Overdue"],tenantInfo:{tenant_name:"",unit_number:"",phone:""},invoice:{number:"000001",date:new Date().toISOString().substr(0,10),dueDate:"",items:[],notes:"",payment_status:"Pending"}}},computed:{total(){return this.invoice.items.reduce((a,o)=>a+parseFloat(o.amount),0)}},watch:{bills:{immediate:!0,handler(a){if(a&&a.length){const o=a[0].tenant.unit.rent,p=a[0].tenant.unit.deposit;this.tenantInfo={tenant_name:a[0].tenant.tenant_name,unit_number:a[0].tenant.unit.unit_number,phone:a[0].tenant.phone};const b={item:"Rent",unit_cost:o,number_of_units:1,amount:o},n={item:"Deposit",unit_cost:p,number_of_units:1,amount:p},u=a.map(m=>({item:m.bill.bill,unit_cost:m.bill.unit_cost,number_of_units:m.bill.number_of_units,amount:m.amount}));this.invoice.items=[b,n,...u]}}}},methods:{show(a){console.log(a),this.dialog=!0,this.id=a.id},formatCurrency(a){return`$${parseFloat(a).toFixed(2)}`},close(){this.dialog=!1}}},V=a=>(q("data-v-c83c31af"),a=a(),w(),a),F=V(()=>s("span",{class:"text-h6"},"Invoice Details",-1)),A=V(()=>s("h5",{class:"font-weight-bold"},"Bill To:",-1)),H={class:"mt-4"};function O(a,o,p,b,n,u){const m=i("v-spacer"),I=i("v-icon"),v=i("v-btn"),x=i("v-card-title"),d=i("v-text-field"),r=i("v-col"),_=i("v-row"),g=i("v-data-table"),y=i("v-textarea"),h=i("v-select"),C=i("v-form"),U=i("v-card-text"),D=i("v-card"),S=i("v-dialog");return N(),P(S,{modelValue:n.dialog,"onUpdate:modelValue":o[9]||(o[9]=t=>n.dialog=t),"max-width":"800px"},{default:l(()=>[e(D,null,{default:l(()=>[e(x,{class:"blue white--text"},{default:l(()=>[F,e(m),e(v,{icon:"",onClick:u.close},{default:l(()=>[e(I,null,{default:l(()=>[f("mdi-close")]),_:1})]),_:1},8,["onClick"])]),_:1}),e(U,null,{default:l(()=>[e(C,{ref:"form",modelValue:n.valid,"onUpdate:modelValue":o[8]||(o[8]=t=>n.valid=t)},{default:l(()=>[e(_,{class:"pa-4"},{default:l(()=>[e(r,{cols:"6"},{default:l(()=>[A,e(d,{modelValue:n.tenantInfo.tenant_name,"onUpdate:modelValue":o[0]||(o[0]=t=>n.tenantInfo.tenant_name=t),label:"Tenant Name",outlined:"",required:""},null,8,["modelValue"]),e(d,{modelValue:n.tenantInfo.unit_number,"onUpdate:modelValue":o[1]||(o[1]=t=>n.tenantInfo.unit_number=t),label:"Unit Number",outlined:""},null,8,["modelValue"]),e(d,{modelValue:n.tenantInfo.phone,"onUpdate:modelValue":o[2]||(o[2]=t=>n.tenantInfo.phone=t),label:"Phone",outlined:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"6",class:"text-right"},{default:l(()=>[e(d,{modelValue:n.invoice.number,"onUpdate:modelValue":o[3]||(o[3]=t=>n.invoice.number=t),label:"Invoice #",outlined:"",readonly:""},null,8,["modelValue"]),e(d,{modelValue:n.invoice.date,"onUpdate:modelValue":o[4]||(o[4]=t=>n.invoice.date=t),label:"Date",outlined:"",type:"date"},null,8,["modelValue"]),e(d,{modelValue:n.invoice.dueDate,"onUpdate:modelValue":o[5]||(o[5]=t=>n.invoice.dueDate=t),label:"Invoice Due Date",outlined:"",type:"date"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{class:"pa-4"},{default:l(()=>[e(r,null,{default:l(()=>[e(g,{headers:n.tableHeaders,items:n.invoice.items,class:"elevation-1","hide-default-footer":"","disable-pagination":""},{"item.item":l(({item:t})=>[s("span",null,c(t.item),1)]),"item.description":l(({item:t})=>[s("span",null,c(t.unit_cost),1)]),"item.quantity":l(({item:t})=>[s("span",null,c(t.number_of_units),1)]),"item.amount":l(({item:t})=>[s("span",null,c(u.formatCurrency(t.amount)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1}),e(_,{class:"pa-4"},{default:l(()=>[e(r,{cols:"6"},{default:l(()=>[e(y,{modelValue:n.invoice.notes,"onUpdate:modelValue":o[6]||(o[6]=t=>n.invoice.notes=t),label:"Notes",outlined:""},null,8,["modelValue"])]),_:1}),e(r,{cols:"6",class:"text-right"},{default:l(()=>[e(h,{modelValue:n.invoice.payment_status,"onUpdate:modelValue":o[7]||(o[7]=t=>n.invoice.payment_status=t),items:n.paymentStatuses,label:"Payment Status",outlined:""},null,8,["modelValue","items"]),s("h4",H,"Total: "+c(u.formatCurrency(u.total)),1)]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(r,{class:"text-right"},{default:l(()=>[e(v,{color:"primary",onClick:a.submitInvoice,disabled:!n.valid},{default:l(()=>[f("Submit")]),_:1},8,["onClick","disabled"]),e(v,{color:"secondary",onClick:u.close,variant:"text"},{default:l(()=>[f("Close")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const z=k(T,[["render",O],["__scopeId","data-v-c83c31af"]]);export{z as default};
